## 액션과 계산, 데이터

- 액션 : 실행 시점과 횟수에 의존한다. 다른 말론 부수효과(side-effects), 부수 효과가 있는 함수(side-effecting function), 순수하지 않은 함수(impure function)라고도 부름. 이메일 보내기, 데이터베이스 읽기 등.
- 계산 : 다른 말로 순수함수(pure function), 수학 함수(mathematical function)라고도 부름. 최댓값 찾기, 이메일 주소가 올바른지 확인하기 등.
- 데이터 : 이벤트에 대한 사실. 사용자가 입력한 이메일 주소, 은행 API로 읽은 달러 수량 등.

> 계산은 계산을 호출하는 코드를 계산 결과로 바꿀 수 있기 때문에 참조 투명(referentially transparent)하다. 무슨 말이냐면 +는 계산이기 때문에 2+3의 결과는 항상 5이다. 그래서 2+3이라는 코드를 5라는 결괏값으로 바꿔도 프로그램은 달라지지 않는다. 2+3 코드는 계산이기 때문에 결과가 항상 같아서 여러번 불러도 문제가 없다는 뜻이다.

#### 문제에 대해 생각할 때

코딩을 시작하기 전에 문제에 대해 고민할 때도 문제를 액션과 계산, 데이터로 나눠 생각해볼 수 있다. 미리 생각해두면 코딩할 때 어떤 부분에 주의해야하는지 알 수 있다.

#### 코딩할 때

코딩을 하면서도 액션, 계산, 데이터를 구분할 수 있다. 함수형 프로그래머는 **최대한 액션에서 계산을 빼내려고 하며 계산에서는 데이터를 분리할 수 있는지를 생각**한다. 더 나아가서는 **액션이 계산이 될 수 있는지, 계산은 데이터가 될 수 있는지 고민**한다.

#### 코드를 읽을 때

코드를 읽을 때 액션, 계산, 데이터 중 어떤 것에 속하는지 잘 살펴보아야 한다. 특히 액션은 시간에 의존하기 때문에 더 조심해야 한다.

## 액션과 계산, 데이터는 어디에나 적용할 수 있다

일상생활의 모든 일들도 액션, 계산, 데이터로 나눌 수 있다. 얼핏 액션으로만 나눠지는 것처럼 보이는 것들도 자세히 들여다보면 계산과 데이터를 끄집어내는 것이 가능하다. 이렇게 계속 발견하며 나누다보면 풍부한 모델을 만들 수 있다.

1. 액션과 계산, 데이터는 어디에나 적용할 수 있다.
2. 액션 안에는 계산과 데이터, 또 다른 액션이 숨어있을지도 모른다.
   - 함수형 프로그래밍에서는 액션을 더 작은 액션과 계산, 데이터로 나누고 나누는 것을 언제 멈춰야할지 아는 것이 중요하다.
3. 계산은 더 작은 계산과 데이터로 나누고 연결할 수 있다.
   - 어떤 경우에는 계산을 더 작은 계산으로 나누는 것이 더 좋을 때도 있다. 계산을 나누면 첫 번째 계산의 결과 데이터가 두 번째 계산의 입력이 된다.
4. 데이터는 데이터만 조합할 수 있다.
   - 데이터는 다른 영향을 주지 않는 그냥 데이터이다. 그래서 데이터 찾는 일을 먼저 해야하며, 데이터를 찾았다면 동작에 대해 많은 것을 알 수 있다.
5. 계산은 때로 '우리 머릿속에서' 일어난다.
   - 계산 단계가 잘 보이지 않는 이유는 계산이 우리 사고 과정에 녹아있기 때문이다. 현실에서 장을 보다가 갑자기 무엇을 사야할지 앉아서 목록을 작성하지는 않듯, 머리속에서 나도 모르게 일어난다.
   - 하지만 이러한 사실을 알면 계산을 더 쉽게 찾을 수 있다. 결정과 계획은 계산이 될 가능성이 높기 때문에 어떤 단계에서 무엇인가 결정해야 할 것이 있는지 또는 무엇인가 계획해서 방법을 찾아야 할 것이 있는지 스스로에게 물어보면 된다.

## 데이터에 대해서

### 불변성

함수형 프로그래머는 불변 데이터 구조를 만들기 위해 두가지 원칙을 사용한다.

1. 카피-온-라이트(copy-on-write) : 변경할 때 복사본을 만든다.
2. 방어적 복사(defensive copy) : 보관하려고 하는 데이터의 복사본을 만든다.

### 데이터의 장점

역설적이게도 데이터는 데이터 자체로 할 수 없기 때문에 좋다. 그렇기 때문에 데이터를 데이터 그대로 이해할 수 있기 때문이다.

1. 직렬화 : 직렬화된 액션과 계산은 다른 곳에서 잘 동작할 것이라는 보장이 없다. 그러나 직렬화된 데이터는 전송하거나 디스크에 저장했다가 읽기 쉽다. 그렇기 때문에 데이터는 일반적으로 함수보다는 오래 사용한다는 것을 알 수 있다.
2. 동일성 비교 : 계산이나 액션은 서로 비교하기 어렵다. 하지만 데이터는 비교하기 쉽다.
3. 자유로운 해석 : 데이터는 여러 가지 방법으로 해석할 수 있다. 예를 들면 접속 로그는 문제 해결을 위해 사용할 수 있지만 모니터링을 위해 사용할 수도 있다.

> **직렬화**(直列化) 또는 **시리얼라이제이션**(serialization)은 [컴퓨터 과학](https://ko.wikipedia.org/wiki/%EC%BB%B4%ED%93%A8%ED%84%B0_%EA%B3%BC%ED%95%99 "컴퓨터 과학")의 데이터 스토리지 문맥에서 [데이터 구조](https://ko.wikipedia.org/wiki/%EB%8D%B0%EC%9D%B4%ED%84%B0_%EA%B5%AC%EC%A1%B0 "데이터 구조")나 [오브젝트](https://ko.wikipedia.org/wiki/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8 "오브젝트") 상태를 동일하거나 다른 컴퓨터 환경에 저장(이를테면 [파일](https://ko.wikipedia.org/wiki/%EC%BB%B4%ED%93%A8%ED%84%B0_%ED%8C%8C%EC%9D%BC "컴퓨터 파일")이나 메모리 [버퍼](https://ko.wikipedia.org/wiki/%EB%8D%B0%EC%9D%B4%ED%84%B0_%EB%B2%84%ED%8D%BC "데이터 버퍼")에서, 또는 [네트워크](https://ko.wikipedia.org/wiki/%EC%BB%B4%ED%93%A8%ED%84%B0_%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC "컴퓨터 네트워크") 연결 링크 간 전송)하고 나중에 재구성할 수 있는 포맷으로 변환하는 과정이다. (출처 : 위키백과 '직렬화' 문서)

### 데이터의 단점

유연하게 해석할 수 있는 것은 데이터의 단점이지만 반드시 해석이 필요하다는 점은 단점이다. 계산은 해석하지 않아도 실행할 수 있다.

### 사용자나 다른 엔티티는 무엇일까?
