## 머리말

함수형 프로그래밍은 적어도 60년은 되었다.
함수형 프로그래밍 패러다임의 첫번째 중요한 부분은 액션과 계산, 데이터를 구분하는 것이다.
이 책에서는 함수형 프로그래밍에서 흔하게 사용하지만 다른 곳에서는 생소한 기술을 소개한다.

## 챕터 1. 쏙쏙 들어오는 함수형 코딩에 오신 것을 환영합니다.

### 함수형 프로그맹이란?

함수형 프로그래밍은 범용 프로그래밍 패러다임이기 때문에 어디서나 잘 쓸 수 있다. 함수형 프로그래밍은 순수 함수만 사용하는 패러다임이 아니다. 부수효과는 소프트웨어를 실행하는 이유이다. 함수형 프로그래밍은 순수하지 않은 함수(부수 효과)를 잘 다룰 수 있는 기술을 다룬다.

> 부수효과 : 함수가 리턴값 이외에 하는 모든 일. 이메일 보내기, 파일 읽기, 불빛 깜빡이기 등등..

> 순수함수 : 인자에만 의존하고 부수 효과가 없는 함수. 같은 인자를 넣으면 항상 같은 결과를 반환.

### 액션과 계산, 데이터 구분하기

> **함수형 프로그래머는 코드를 액션과 계산, 데이터로 구분한다.** 이것이 함수형 프로그래밍의 핵심 개념이다. 함수형 프로그래머는 액션보다 계산을 좋아하고 계산보다 데이터를 좋아한다.

- 액션은 호출하는 시점과 횟수에 의존한다. 호출할 때 조심해야 한다.
- 계산과 데이터는 언제 호출해도 항상 같은 값을 준다. 횟수 역시 중요하지 않으며 나머지 코드나 소프트웨어 외부에 영향을 주지 않는 코드이다.
- 계산과 데이터의 차이는 실행 여부에 있다. 계산은 실행 가능하나 데이터는 그렇지 않다.
- 데이터는 정적이고 보이는 그대로이다. 하지만 계산은 실행하지 전까지 어떻게 동작할지 알 수 없다.

### 액션, 계산, 데이터 구분 시나리오

1. 사용자가 작업 완료 표시를 함 (액션, 실행 횟수에 의존할 수 있으므로)
2. 클라이언트가 서버로 메시지를 보냄 (액션, 메시지 자체는 데이터에 해당)
3. 서버가 메시지를 받음 (액션, 횟수에 따른 차이가 발생할 수 있음)
4. 서버가 데이터베이스를 변경 (액션, 내부 상태가 수정되므로)
5. 서버가 누구에게 알림을 보낼지 결정 (계산, 입력값에 의존하여 항상 같은 결과를 내므로)
6. 서버가 이메일로 알림을 보냄 (액션, 횟수에 따른 차이가 발생할 수 있으므로)

> 개인적으로 5번도 횟수에 의존하는 것 아닌가 생각했으나, 책에서는 5번은 누구에게 알림을 보낼지 '결정'하는 과정이므로 횟수에 영향을 받지 않는 계산으로 분류되고 6번은 결정된 내용을 '전송'하는 것이므로 횟수에 영향을 받는 액션이 된다고 설명하고 있다.

#### 액션

액션은 실행시점이나 횟수 또는 둘 다에 의존한다. 같은 메일을 10번 보내는 것과 한 번 보내는 것 또는 보내지 않는 것 역시 다르다.

- 시간이 지남에 따라 안전하게 상태를 바꿀 수 있는 방법
- 순서를 보장하는 방법
- 액션이 정확히 한 번만 실행되게 보장하는 방법

#### 계산

계산은 입력값으로 출력값을 만드는 것이다. 같은 입력값을 가지고 계산하면 항상 같은 결과값이 나온다. 언제 어디서 계산해도 결과는 같고 외부에 영향을 주지 않는다. 계산은 테스트하기 쉽고 언제든지 몇 번을 불러도 안전하다.

- 정확성을 위한 정적 분석
- 소프트웨어에서 쓸 수 있는 수학적 지식
- 테스트 전략

#### 데이터

데이터는 이벤트에 대해 기록한 사실이다. 알아보기 쉬운 속성으로 되어 있고 실행하지 않아도 데이터 자체로 의미가 있다. 또 같은 데이터를 여러 형태로 해석할 수 있다.

- 효율적으로 접근하기 위해 데이터를 구성하는 방법
- 데이터를 보관하기 위한 기술
- 데이터를 이요해 중요한 것을 발견하는 원칙

### 액션, 계산, 데이터를 구분하면 얻을 수 있는 장점

> 함수형 프로그래밍은 요즘 유행하는 분산 시스템에 잘 어울린다.

여러 컴퓨터가 네트워크를 통해 통신하기 시작하면 소프트웨어가 복잡해진다. 처리해야 할 메시지는 순서가 섞일 수 있고 중복되기도 하고 유실되기도 한다. 시간에 따라 바뀌는 값을 모델링할 때 동작 방법을 이해하는 것은 중요하지만 쉽지 않다. **실행 시점이나 횟수에 의존하는 코드를 없애면, 코드를 더 쉽게 이해할 수 있고 심각한 버그를 막을 수 있다.** 데이터와 계산은 실행 시점이나 횟수에 의존하지 않는다. 그래서 코드를 데이터와 계산으로 바꿀수록 분산 시스템에서 생기는 여러가지 문제를 해결할 수 있다.

**액션은 실행 시점과 횟수에 의존하기 때문에 여전히 문제가 되지만 코드 전체에 영향을 주지 않도록 격리시키는 방법을 사용**하면 된다. 또 분산 시스템이 아무리 불확실성을 가지고 있다고 해도 액션을 안전하게 다룰 수 있는 기술이 있기 때문에 안심할 수 있다. 그리고 **코드의 많은 부분을 액션에서 계산으로 옮기면 결과적으로 액션도 다루기 쉬워진다.**

#### 분산 시스템 규칙 3가지 (분산 시스템이 되면 모든 것이 복잡해진다)

1. 메시지 순서가 바뀔 수 있다.
2. 메시지는 한 번 이상 도착할 수도 있고 도착하지 않을 수도 있다.
3. 응답을 받지 못하면 무슨 일이 생겼는지 알 수 없다.

### 함수형 사고란?

> 함수형 사고는 함수형 프로그래머가 소프트웨어 무제를 해결하기 위해 사용하는 기술과 생각을 말한다.

여러 가지 기술과 생각이 있지만 가장 중요한 두 가지를 꼽자면 첫 번째는 액션과 계산, 데이터를 구분해서 생각하는 것이고, 두 번째는 일급 추상(first-class abstraction)이라는 개념이다. 이 두 가지 개념은 함수형 프로그래밍으로 실용적이고 튼튼한 프로그램을 만드는 기초가 된다. 그리고 이 개념을 이해하는 것이 전문적인 함수형 프로그래머로 가는 길이기도 하다.
